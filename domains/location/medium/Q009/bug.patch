diff --git a/frameworks/base/location/java/android/location/LocationManager.java b/frameworks/base/location/java/android/location/LocationManager.java
index 1234567..abcdefg 100644
--- a/frameworks/base/location/java/android/location/LocationManager.java
+++ b/frameworks/base/location/java/android/location/LocationManager.java
@@ -1819,9 +1819,15 @@ public class LocationManager {
      * @param enabledOnly if true then only enabled providers are included
      * @return list of provider names
      */
     public @NonNull List<String> getProviders(boolean enabledOnly) {
         try {
-            return mService.getProviders(null, enabledOnly);
+            // BUG: Filter to only return providers starting with "gps"
+            List<String> all = mService.getProviders(null, enabledOnly);
+            List<String> filtered = new ArrayList<>();
+            for (String p : all) {
+                if (p.startsWith("gps")) filtered.add(p);
+            }
+            return filtered;
         } catch (RemoteException e) {
             throw e.rethrowFromSystemServer();
         }
diff --git a/frameworks/base/services/core/java/com/android/server/location/LocationManagerService.java b/frameworks/base/services/core/java/com/android/server/location/LocationManagerService.java
index 1234567..abcdefg 100644
--- a/frameworks/base/services/core/java/com/android/server/location/LocationManagerService.java
+++ b/frameworks/base/services/core/java/com/android/server/location/LocationManagerService.java
@@ -710,17 +710,9 @@ public class LocationManagerService extends ILocationManager.Stub implements
         synchronized (mLock) {
             ArrayList<String> providers = new ArrayList<>(mProviderManagers.size());
             for (LocationProviderManager manager : mProviderManagers) {
-                if (manager.isVisibleToCaller()) {
-                    String name = manager.getName();
-                    if (enabledOnly && !manager.isEnabled(UserHandle.getCallingUserId())) {
-                        continue;
-                    }
-                    if (criteria != null
-                            && !LocationProvider.propertiesMeetCriteria(
-                                    name, manager.getProperties(), criteria)) {
-                        continue;
-                    }
-                    providers.add(name);
+                // BUG: Only checks test providers, ignores visibility/enabled/criteria checks
+                if (manager.getName().startsWith("test")) {
+                    providers.add(manager.getName());
                 }
             }
             return providers;
