{
  "id": "DIS-M006",
  "title": "VirtualDisplay 私有標誌設定錯誤",
  "domain": "display",
  "difficulty": "medium",
  "bugType": "COND",
  "affectedFiles": [
    "frameworks/base/services/core/java/com/android/server/display/VirtualDisplayAdapter.java"
  ],
  "ctsTests": [
    "android.display.cts.VirtualDisplayTest#testPrivateVirtualDisplay",
    "android.display.cts.VirtualDisplayTest#testPrivatePresentationVirtualDisplay",
    "android.display.cts.VirtualDisplayTest#testPrivateVirtualDisplayWithDynamicSurface",
    "android.display.cts.VirtualDisplayTest#testUntrustedSysDecorVirtualDisplay"
  ],
  "answer": "A",
  "injectionPoint": {
    "file": "frameworks/base/services/core/java/com/android/server/display/VirtualDisplayAdapter.java",
    "line": 474,
    "method": "VirtualDisplayDevice.getDisplayDeviceInfoLocked()",
    "description": "條件運算符翻轉：== 0 改為 != 0"
  },
  "callChain": [
    "VirtualDisplayTest.testPrivateVirtualDisplay()",
    "DisplayManager.createVirtualDisplay()",
    "DisplayManagerGlobal.createVirtualDisplay()",
    "IDisplayManager.createVirtualDisplay() [Binder]",
    "DisplayManagerService.createVirtualDisplayInternal()",
    "DisplayManagerService.createVirtualDisplayLocked()",
    "VirtualDisplayAdapter.createVirtualDisplayLocked()",
    "new VirtualDisplayDevice()",
    "VirtualDisplayDevice.getDisplayDeviceInfoLocked() [Bug injection]"
  ],
  "keywords": [
    "VirtualDisplay",
    "FLAG_PRIVATE",
    "FLAG_PUBLIC",
    "DisplayDeviceInfo",
    "condition flip"
  ],
  "created": "2025-01-20",
  "version": "2.0",
  "verified": {
    "phaseCDate": "2026-02-24",
    "failedTests": 20,
    "passedTests": 76,
    "status": "PASS"
  },
  "verification_status": "complete",
  "verification_date": "2026-02-24",
  "verification_issues": [],
  "cts_summary": {
    "passed": 76,
    "failed": 20,
    "total": 139,
    "target_test_failed": true
  }
}