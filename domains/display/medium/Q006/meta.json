{
  "id": "DIS-M006",
  "title": "Virtual Display 釋放時的空指標處理缺陷",
  "domain": "display",
  "difficulty": "medium",
  "cts_test": "android.hardware.display.cts.VirtualDisplayTest#testPrivateVirtualDisplay",
  "cts_module": "CtsDisplayTestCases",
  "injection_point": "DIS-014",
  "injection_type": ["RES", "STATE"],
  "affected_files": ["frameworks/base/services/core/java/com/android/server/display/DisplayManagerService.java"],
  "tags": [
    "virtual-display",
    "null-pointer",
    "resource-management",
    "defensive-programming",
    "display-lifecycle"
  ],
  "estimated_time_minutes": 25,
  "bug_description": "移除了 releaseVirtualDisplayInternal() 中對 device 的 null 檢查，導致當虛擬顯示器不存在或已被釋放時，將 null 傳給 onDisplayDeviceEvent() 造成 NullPointerException",
  "root_cause": "缺少對 releaseVirtualDisplayLocked() 返回值的 null 檢查",
  "symptom": "釋放不存在的虛擬顯示器時 system_server 崩潰",
  "created_at": "2025-01-19",
  "version": "1.0"
}
