{
  "id": "DIS-H002",
  "title": "Display Supported Modes State-Dependent Truncation Bug",
  "domain": "display",
  "difficulty": "hard",
  "cts_test": "android.display.cts.DisplayTest#testMode",
  "cts_module": "CtsDisplayTestCases",
  "injection_point": "DIS-020",
  "injection_type": ["STATE", "CALC"],
  "affected_files": [
    "frameworks/base/services/core/java/com/android/server/display/LogicalDisplay.java"
  ],
  "tags": [
    "display-mode",
    "state-machine",
    "array-copy",
    "mDirty",
    "refresh-rate",
    "supported-modes",
    "intermittent-bug"
  ],
  "estimated_time_minutes": 35,
  "bug_description": "When mDirty flag is true, supportedModes array is incorrectly truncated by 1, causing the last display mode to be missing from getSupportedModes()",
  "root_cause": "Incorrect 'optimization' logic that reduces mode count when display state is dirty",
  "fix_complexity": "Simple removal of erroneous conditional logic",
  "created_at": "2025-01-25T09:00:00+08:00"
}
