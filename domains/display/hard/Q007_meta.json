{
  "id": "DIS-H007",
  "title": "Display Event Listener Mask 狀態管理問題 - AtomicLong 操作語義錯誤",
  "domain": "display",
  "difficulty": "hard",
  "cts_test": "android.hardware.display.cts.DisplayEventTest#testDisplayEvents",
  "cts_module": "CtsDisplayTestCases",
  "injection_point": "DIS-041",
  "injection_type": ["STATE", "SYNC"],
  "affected_files": [
    "frameworks/base/services/core/java/com/android/server/display/DisplayManagerService.java"
  ],
  "tags": [
    "CallbackRecord",
    "AtomicLong",
    "eventsMask",
    "state-management",
    "accumulator-bug",
    "subscription-leak",
    "thread-safety"
  ],
  "estimated_time_minutes": 35,
  "key_concepts": [
    "AtomicLong 操作語義（set vs getAndAccumulate）",
    "位元遮罩狀態管理",
    "事件訂閱/退訂機制",
    "累加器模式的誤用"
  ],
  "hints_available": 3,
  "solution_line_range": {
    "start": 3588,
    "end": 3590
  }
}
