{
  "id": "DIS-H005",
  "title": "Display Mode Frame Rate Override 計算與邊界檢查錯誤",
  "domain": "display",
  "difficulty": "hard",
  "cts_test": "android.display.cts.DisplayTest#testGetSupportedModesOnDefaultDisplay",
  "cts_module": "CtsDisplayTestCases",
  "injection_point": "DIS-038",
  "injection_type": [
    "CALC",
    "BOUND"
  ],
  "affected_files": [
    "frameworks/base/services/core/java/com/android/server/display/LocalDisplayAdapter.java"
  ],
  "tags": [
    "DisplayManagerService",
    "frame-rate-override",
    "floating-point-math",
    "rounding-error",
    "boundary-condition",
    "Math.round-vs-floor",
    "threshold-comparison"
  ],
  "estimated_time_minutes": 35,
  "bug_characteristics": {
    "bug_count": 2,
    "interaction": "compound",
    "description": "Math.floor(x + 0.4999) 不等於 Math.round(x)，且 >= 與 > 的閾值錯誤，兩者互相掩蓋"
  },
  "skills_tested": [
    "floating-point-precision",
    "mathematical-reasoning",
    "boundary-analysis",
    "code-review",
    "native-java-sync-understanding"
  ],
  "hints": [
    "檢查 numPeriodsRound 的計算方式",
    "思考 Math.round(2.5) 與 Math.floor(2.5 + 0.4999) 的結果差異",
    "注意閾值比較使用的是 > 還是 >="
  ],
  "needs_revalidation": false,
  "revalidation_requested": "2026-02-17",
  "revalidation_reason": "Hard 難度全數重新驗證",
  "verified": true,
  "verified_at": "2026-02-18",
  "verified_device": "2B231FDH200B4Z",
  "verified_result": "FAILED 2/2 (alternativeRefreshRates cleared for non-first modes)",
  "verification_status": "complete",
  "verification_date": "2026-02-21",
  "cts_summary": {
    "passed": 0,
    "failed": 2,
    "total": 2
  }
}