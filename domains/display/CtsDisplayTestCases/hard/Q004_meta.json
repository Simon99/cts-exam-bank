{
  "id": "display-hard-004",
  "title": "Color Mode 設定無效 - HAL 映射錯誤",
  "difficulty": "hard",
  "domain": "display",
  "module": "CtsDisplayTestCases",
  "pattern": "C",
  "patternDesc": "跨檔案調用鏈 - A(DMS)→B(LogicalDisplay)→C(LocalDisplayAdapter)，問題在 C",
  "targetTests": [
    "android.display.cts.DisplayTest#testGetSupportWideColorGamut_displayIsWideColorGamut"
  ],
  "callChain": [
    "DisplayManagerService.configureColorModeLocked()",
    "LogicalDisplay.setRequestedColorModeLocked()",
    "LocalDisplayAdapter.requestColorMode()"
  ],
  "bugFile": "frameworks/base/services/core/java/com/android/server/display/LocalDisplayAdapter.java",
  "bugMethod": "requestColorMode",
  "bugType": "constant_mapping_error",
  "bootSafe": true,
  "expectedResult": {
    "outcome": "assertion_failure",
    "failedTests": 4,
    "passedTests": 92,
    "errorMessage": "Wide color gamut not enabled"
  },
  "timeLimit": 40,
  "hints": [
    "上層 API 和底層 HAL 之間有映射關係",
    "注意常數值的對應是否正確",
    "Color mode 涉及多層轉換"
  ],
  "verified": false
}
