diff --git a/frameworks/base/core/java/android/net/NetworkPolicy.java b/frameworks/base/core/java/android/net/NetworkPolicy.java
index 1234567..abcdefg 100644
--- a/frameworks/base/core/java/android/net/NetworkPolicy.java
+++ b/frameworks/base/core/java/android/net/NetworkPolicy.java
@@ -280,14 +280,15 @@ public class NetworkPolicy implements Parcelable, Comparable<NetworkPolicy> {
     public byte[] getBytesForBackup() throws IOException {
         ByteArrayOutputStream baos = new ByteArrayOutputStream();
         DataOutputStream out = new DataOutputStream(baos);
 
         out.writeInt(VERSION_RAPID);
         out.write(getNetworkTemplateBytesForBackup());
-        cycleRule.writeToStream(out);
+        // BUG: warningBytes written before cycleRule, but read expects cycleRule first
         out.writeLong(warningBytes);
+        cycleRule.writeToStream(out);  // Should be before warningBytes!
         out.writeLong(limitBytes);
         out.writeLong(lastWarningSnooze);
         out.writeLong(lastLimitSnooze);
         out.writeLong(lastRapidSnooze);
         out.writeInt(metered ? 1 : 0);
         out.writeInt(inferred ? 1 : 0);
@@ -304,6 +305,7 @@ public class NetworkPolicy implements Parcelable, Comparable<NetworkPolicy> {
         final NetworkTemplate template = getNetworkTemplateFromBackup(in);
         final RecurrenceRule cycleRule;
         if (version >= VERSION_RULE) {
+            // Reads cycleRule first - but getBytesForBackup() writes warningBytes first!
             cycleRule = new RecurrenceRule(in);
         } else {
             final int cycleDay = in.readInt();
diff --git a/frameworks/base/core/java/android/util/RecurrenceRule.java b/frameworks/base/core/java/android/util/RecurrenceRule.java
index 3456789..cdefghi 100644
--- a/frameworks/base/core/java/android/util/RecurrenceRule.java
+++ b/frameworks/base/core/java/android/util/RecurrenceRule.java
@@ -113,9 +113,11 @@ public class RecurrenceRule implements Parcelable {
 
     public void writeToStream(DataOutputStream out) throws IOException {
         out.writeInt(VERSION_INIT);
-        BackupUtils.writeString(out, convertZonedDateTime(start));
-        BackupUtils.writeString(out, convertZonedDateTime(end));
+        // BUG: Writing period first instead of start time
+        // This misaligns with the read logic in constructor
         BackupUtils.writeString(out, convertPeriod(period));
+        BackupUtils.writeString(out, convertZonedDateTime(start));
+        BackupUtils.writeString(out, convertZonedDateTime(end));
     }
 
     @Override
