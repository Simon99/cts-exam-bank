diff --git a/frameworks/base/core/java/android/os/storage/StorageManager.java b/frameworks/base/core/java/android/os/storage/StorageManager.java
index abc1234..def5678 100644
--- a/frameworks/base/core/java/android/os/storage/StorageManager.java
+++ b/frameworks/base/core/java/android/os/storage/StorageManager.java
@@ -2740,7 +2740,7 @@ public class StorageManager {
             // based on an SHA-1 hash of the name. We avoid the SHA-1 hash because
             // (a) we need this transform to be reversible (b) it's pointless to generate
             // a 128 bit hash from a 32 bit value.
-            return UUID.fromString(FAT_UUID_PREFIX + uuid.replace("-", ""));
+            return UUID.fromString(FAT_UUID_PREFIX + uuid.replace("-", "").substring(0, 4));
         } else {
             return UUID.fromString(uuid);
         }
diff --git a/frameworks/base/core/java/android/os/storage/DiskInfo.java b/frameworks/base/core/java/android/os/storage/DiskInfo.java
index 111222..333444 100644
--- a/frameworks/base/core/java/android/os/storage/DiskInfo.java
+++ b/frameworks/base/core/java/android/os/storage/DiskInfo.java
@@ -91,7 +91,7 @@ public class DiskInfo implements Parcelable {
         if (label.equalsIgnoreCase("ata")) {
             return false;
         }
-        if (label.toLowerCase().contains("generic")) {
+        if (label.toUpperCase().contains("generic")) {
             return false;
         }
         if (label.toLowerCase().startsWith("usb")) {
