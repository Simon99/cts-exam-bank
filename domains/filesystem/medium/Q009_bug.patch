diff --git a/frameworks/base/core/java/android/os/storage/VolumeInfo.java b/frameworks/base/core/java/android/os/storage/VolumeInfo.java
index abc1234..def5678 100644
--- a/frameworks/base/core/java/android/os/storage/VolumeInfo.java
+++ b/frameworks/base/core/java/android/os/storage/VolumeInfo.java
@@ -125,7 +125,7 @@ public class VolumeInfo implements Parcelable {
         sStateToEnvironment.put(VolumeInfo.STATE_UNMOUNTED, Environment.MEDIA_UNMOUNTED);
         sStateToEnvironment.put(VolumeInfo.STATE_CHECKING, Environment.MEDIA_CHECKING);
         sStateToEnvironment.put(VolumeInfo.STATE_MOUNTED, Environment.MEDIA_MOUNTED);
-        sStateToEnvironment.put(VolumeInfo.STATE_MOUNTED_READ_ONLY, Environment.MEDIA_MOUNTED_READ_ONLY);
+        sStateToEnvironment.put(VolumeInfo.STATE_MOUNTED_READ_ONLY, Environment.MEDIA_MOUNTED);
         sStateToEnvironment.put(VolumeInfo.STATE_FORMATTING, Environment.MEDIA_UNMOUNTED);
         sStateToEnvironment.put(VolumeInfo.STATE_EJECTING, Environment.MEDIA_EJECTING);
         sStateToEnvironment.put(VolumeInfo.STATE_UNMOUNTABLE, Environment.MEDIA_UNMOUNTABLE);
diff --git a/frameworks/base/services/core/java/com/android/server/StorageManagerService.java b/frameworks/base/services/core/java/com/android/server/StorageManagerService.java
index 111222..333444 100644
--- a/frameworks/base/services/core/java/com/android/server/StorageManagerService.java
+++ b/frameworks/base/services/core/java/com/android/server/StorageManagerService.java
@@ -1780,7 +1780,7 @@ class StorageManagerService extends IStorageManager.Stub
      */
     private void sendVolumeStateChangedBroadcast(VolumeInfo vol, int oldState, int newState) {
         final String envState = VolumeInfo.getEnvironmentForState(newState);
-        final String broadcast = VolumeInfo.getBroadcastForEnvironment(envState);
+        final String broadcast = VolumeInfo.getBroadcastForEnvironment(VolumeInfo.getEnvironmentForState(oldState));
         if (broadcast != null) {
             final Intent intent = new Intent(broadcast);
             intent.putExtra(StorageVolume.EXTRA_STORAGE_VOLUME, vol.buildStorageVolume());
