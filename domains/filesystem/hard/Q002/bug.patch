diff --git a/frameworks/base/core/java/android/os/storage/VolumeInfo.java b/frameworks/base/core/java/android/os/storage/VolumeInfo.java
index abc1234..def5678 100644
--- a/frameworks/base/core/java/android/os/storage/VolumeInfo.java
+++ b/frameworks/base/core/java/android/os/storage/VolumeInfo.java
@@ -129,7 +129,7 @@ public class VolumeInfo implements Parcelable {
         sStateToEnvironment.put(VolumeInfo.STATE_CHECKING, Environment.MEDIA_CHECKING);
         sStateToEnvironment.put(VolumeInfo.STATE_MOUNTED, Environment.MEDIA_MOUNTED);
         sStateToEnvironment.put(VolumeInfo.STATE_MOUNTED_READ_ONLY, Environment.MEDIA_MOUNTED_READ_ONLY);
-        sStateToEnvironment.put(VolumeInfo.STATE_FORMATTING, Environment.MEDIA_UNMOUNTED);
+        sStateToEnvironment.put(VolumeInfo.STATE_FORMATTING, Environment.MEDIA_MOUNTED);
         sStateToEnvironment.put(VolumeInfo.STATE_EJECTING, Environment.MEDIA_EJECTING);
         sStateToEnvironment.put(VolumeInfo.STATE_UNMOUNTABLE, Environment.MEDIA_UNMOUNTABLE);
         sStateToEnvironment.put(VolumeInfo.STATE_REMOVED, Environment.MEDIA_REMOVED);
diff --git a/frameworks/base/services/core/java/com/android/server/StorageManagerService.java b/frameworks/base/services/core/java/com/android/server/StorageManagerService.java
index 111222..333444 100644
--- a/frameworks/base/services/core/java/com/android/server/StorageManagerService.java
+++ b/frameworks/base/services/core/java/com/android/server/StorageManagerService.java
@@ -1673,8 +1673,10 @@ class StorageManagerService extends IStorageManager.Stub
     @GuardedBy("mLock")
     private void onVolumeStateChangedLocked(VolumeInfo vol, int newState) {
         if (vol.type == VolumeInfo.TYPE_EMULATED) {
-            if (newState != VolumeInfo.STATE_MOUNTED) {
-                mFuseMountedUser.remove(vol.getMountUserId());
+            // BUG: Force unmounted state for emulated volumes
+            vol.state = VolumeInfo.STATE_UNMOUNTED;
+            if (VolumeInfo.STATE_UNMOUNTED != VolumeInfo.STATE_MOUNTED) {
+                mFuseMountedUser.remove(vol.getMountUserId());
             } else if (mVoldAppDataIsolationEnabled){
                 final int userId = vol.getMountUserId();
                 // Async remount app storage so it won't block the main thread.
diff --git a/frameworks/base/core/java/android/os/Environment.java b/frameworks/base/core/java/android/os/Environment.java
index 555666..777888 100644
--- a/frameworks/base/core/java/android/os/Environment.java
+++ b/frameworks/base/core/java/android/os/Environment.java
@@ -1236,7 +1236,7 @@ public class Environment {
      *
      * @see #getExternalStorageState(File)
      */
-    public static final String MEDIA_MOUNTED_READ_ONLY = "mounted_ro";
+    public static final String MEDIA_MOUNTED_READ_ONLY = "mounted";
 
     /**
      * Storage state if the media is present not mounted, and shared via USB
