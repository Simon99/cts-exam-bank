diff --git a/frameworks/base/core/java/android/hardware/camera2/params/OutputConfiguration.java b/frameworks/base/core/java/android/hardware/camera2/params/OutputConfiguration.java
--- a/frameworks/base/core/java/android/hardware/camera2/params/OutputConfiguration.java
+++ b/frameworks/base/core/java/android/hardware/camera2/params/OutputConfiguration.java
@@ -895,6 +895,14 @@ public final class OutputConfiguration implements Parcelable {
      *         with it.
      */
     public void addSurface(@NonNull Surface surface) {
+        // BUG: 對 surface 格式記錄 log（線索）
+        // log 會顯示 "Adding surface with format: X"
+        // 但真正的格式檢查錯誤在 CameraDeviceImpl
+        if (surface != null) {
+            int format = SurfaceUtils.getSurfaceFormat(surface);
+            Log.d(TAG, "Adding surface with format: " + format + 
+                  " (JPEG=" + ImageFormat.JPEG + ")");
+        }
         checkNotNull(surface, "Surface must not be null");
         if (mSurfaces.contains(surface)) {
             throw new IllegalStateException("Surface is already added!");
diff --git a/frameworks/base/core/java/android/hardware/camera2/impl/CameraDeviceImpl.java b/frameworks/base/core/java/android/hardware/camera2/impl/CameraDeviceImpl.java
--- a/frameworks/base/core/java/android/hardware/camera2/impl/CameraDeviceImpl.java
+++ b/frameworks/base/core/java/android/hardware/camera2/impl/CameraDeviceImpl.java
@@ -1556,6 +1556,15 @@ public class CameraDeviceImpl extends CameraDevice
     }
 
     private void checkInputConfiguration(InputConfiguration inputConfig) {
+        // BUG: 錯誤地排除 JPEG 格式的 output surface
+        // 這個檢查完全不應該存在，JPEG 是完全支援的格式
+        if (inputConfig != null) {
+            int format = inputConfig.getFormat();
+            if (format == ImageFormat.JPEG) {
+                throw new IllegalArgumentException(
+                        "Output surface format not in supported list");
+            }
+        }
         if (inputConfig == null) {
             return;
         }
