# CTS 題庫專案：三日進展報告
**期間：2026-02-20 ~ 2026-02-22**
**版本：v1.0**

---

## 📊 成果總覽

| 項目 | 狀態 |
|------|------|
| **Display Easy 題庫** | ✅ 10/10 完成 |
| **Display Medium 題庫** | ✅ 10/10 完成（已驗證） |
| **驗證腳本** | ✅ cts-verify-v2.5.sh 穩定運行 |
| **設備狀態** | 2B231 穩定 / 27161 USB 問題 |

---

## 📅 Day 1 (2026-02-20)

### 工作內容
- Q002 完整驗證（buggy + clean 對照）
- Flash 時間線實驗（5 次有效數據）
- USB I/O 阻塞問題深入分析

### 關鍵發現
1. **OLC `-s` 參數問題**：導致設備探測異常
2. **USB D 狀態**：頻繁發生，物理重插是最可靠解決方案
3. **設備差異**：27161 需 50s 開機，2B231 只需 38s

### 產出
- Flash 時間線數據
- USB 問題診斷報告
- 改進版腳本設計（冷卻期 + 健康檢查）

---

## 📅 Day 2 (2026-02-21)

### 工作內容
- Display Easy Q001-Q004, Q009-Q010 驗證
- Display Medium 全 10 題驗證完成
- 腳本更新（webhook 通知、自動標記 verified）

### 關鍵事件
1. **失焦事件（23:04-23:14）**：過度追蹤 build 進度，忽略老大問題
2. **tmux 路徑錯誤**：腳本沒執行卻等 webhook

### 教訓
- 不要陷入「追蹤任務」循環
- Webhook 會自動通知，不需持續監控
- 老大的問題 > 任務進度

---

## 📅 Day 3 (2026-02-22)

### 工作內容
- Q005-Q008 原設計驗證失敗（VirtualDisplayTest 崩潰）
- Sub-agent 重新設計 4 道題目
- 最終驗證全部通過

### 關鍵決策
1. **放棄修復 VirtualDisplayTest** → 重新設計題目
2. **切換設備**：27161 卡住 → 改用 2B231
3. **新設計方案**：DisplayTest + OverlayDisplayAdapter.java

### Q005-Q008 新設計
| 題號 | Bug | 測試方法 |
|------|-----|----------|
| Q005 | xDpi +1 | testGetMetrics |
| Q006 | yDpi +1 | testGetMetrics |
| Q007 | type=VIRTUAL | testGetDisplays |
| Q008 | flags=0 | testFlags |

### 驗證時間線
- 09:42 - 切換設備，重新啟動驗證
- 09:47 - Q005 ✅
- 09:53 - Q006 ✅
- 09:59 - Q007 ✅
- 10:04 - Q008 ✅ → **Display Easy 10/10 完成！**

---

## 🔧 技術改進

### 驗證腳本 (cts-verify-v2.5.sh)
- ✅ Webhook Discord 通知
- ✅ 自動設定 meta.json verified=true
- ✅ Pre-flash 健康檢查
- ✅ 邏輯等待（非固定秒數）

### 最佳實踐
- 用 **tmux** 執行長時間任務（不用 nohup）
- 用 **2B231** 設備（比 27161 穩定）
- 環境變數指定設備：`CTS_DEVICE=2B231FDH200B4Z`

---

## ⚠️ 待解決問題

1. **27161 USB 阻塞**：需物理重插或檢查線材
2. **jq 未安裝**：部分腳本功能受限
3. **meta.json 自動更新 bug**：偶爾寫入失敗

---

## 📈 下一步建議

1. **Display Hard** — 如果要繼續 Display 領域
2. **其他領域** — 開始新的 CTS 模組
3. **27161 設備** — 檢修或更換 USB 線

---

**報告時間：2026-02-22 10:07**
**報告人：四號 / Sage**
